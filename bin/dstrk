#!/usr/bin/python

# Make this as compatible across Python 2 & 3 as possible
from __future__ import print_function
from __future__ import absolute_import
from __future__ import division

# system imports
import argparse
import os

# parse the arguments
parser = argparse.ArgumentParser(description='Track your datasets and files, what created them, when and from what')
parser.add_argument('command', metavar='cmd', choices=['initDB', 'addDS', 'addfiles', 'lsfiles', 'lstree'], help='command for Datset Tracker to run')
                    
args = parser.parse_args()

# do whatever we were asked to do
if args.command == 'initDB':

    # Initialise the Database. Default is in ~/.dstrk
    ds_base_path = "~/.dstrk"
    try:
        import dstrk.database
        dstrk.database.create(os.path.expanduser(ds_base_path))
    except:
        print ("Error initialising databse at ", ds_base_path)
    
